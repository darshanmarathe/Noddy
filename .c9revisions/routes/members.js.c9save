{"ts":1381386921591,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\rvar passport =  require('passport');\rvar _userRepo = require('./../Repos/userRepo');\rvar _noddRepo = require('./../Repos/noddRepo');\rvar _ = require('underscore');\r\rexports.mynodds =function(req , res) {\r\tconsole.log(req.user.username)\r\t\tif (!req.isAuthenticated()) {res.redirect('/')};\r\r\r\r\t_noddRepo.getNodds(req.user , function(docs) {\r\r\t\tvar count = 1 ;\r\t\t_.each(docs,  function(item) {\r\t\t\titem.srno = count; count++;\r\t\t\tconsole.log(item);\r\t\t});\r\t\t\tres.render('members/mynodds', { title: 'Your nodds' , model : docs ,   layout : 'userLayout'} );\r\t})\r}\r\r\rexports.index =function(req , res) {\r\t\r\t\tif (!req.isAuthenticated()) {res.redirect('/')};\r\r\tconsole.log(req.user)\r\r\t_noddRepo.getNodds(req.user , function(docs) {\r\r\t\tvar count = 1 ;\r\t\t_.each(docs,  function(item) {\r\t\t\titem.srno = count; count++;\r\t\t\tconsole.log(item);\r\t\t});\r\t\t\tres.render('members/index', { title: 'Your nodds' , model : docs ,   layout : 'userLayout'} );\r\t})\r\t\r\t\r}\r\rexports.create = function(req , res) {\r\t\r\tif (!req.isAuthenticated()) {res.redirect('/')};\r\t\tres.render('members/create', { title: 'Create your Nodd.' ,  layout : 'userLayout'} );\r\t\r\t\r}\r\rexports.createPost = function(req , res) {\r\tvar nodd = req.body.nodd;\r\tnodd.ownedBy =  req.user;\r\tnodd.updatedBy = req.user;\r\t_noddRepo.insertNodd(nodd);\r\tres.redirect('members/index');\r}\r\rexports.logout = function(req , res) {\r\treq.logout();\r    res.redirect('/');\r}\r\r\rexports.DeleteNodd = function(req ,  res){\r\t_noddRepo.DeleteNodd(req.params.id ,  function(_blog) {\r\t\tres.redirect('members/index');\r\t});\r};\r\r\rexports.EditNodd = function(req , res) {\r\tif (!req.isAuthenticated()) {res.redirect('/')};\r\r\tconsole.log(req.user)\r\t_noddRepo.getNodd(req.params.id ,  function(Nodd) {\r\t\tres.render('members/edit' , {title : 'Edit nodd' , model : Nodd ,  layout : 'userLayout'} );\r\t});\t\r}\r\rexports.UpdateNodd = function(req , res) {\r\r\tvar nodd = req.body.nodd;\r\r\tnodd.updatedBy = req.user;\r\t_noddRepo.updateNodd(nodd ,  function() {\r\t\tres.redirect('members/index');\r\t});\t\r}\r\rexports.define =  function(app , routes) {\r\tapp.get('/members/', routes.index);\r\t\r\tapp.get('/members/index', routes.index);\r\r\tapp.get('/members/create', routes.create);\r\tapp.post('/members/create', routes.createPost);\r\tapp.get('/memebers/DeleteNodd/:id' , routes.DeleteNodd);\r\tapp.get('/Memebers/DeleteNodd/:id' , routes.DeleteNodd);\r\t\r\r\tapp.get('/Memebers/Edit/:id' , routes.EditNodd);\r\tapp.post('/Memebers/Edit' , routes.UpdateNodd);\r\r\tapp.get('/members/mynodds', routes.mynodds);\r\t\r\tapp.get('/members/logout' ,  routes.logout)\r}"]],"start1":0,"start2":0,"length1":0,"length2":2529}]],"length":2529}
